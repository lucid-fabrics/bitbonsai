---
title: Add Your First Library
description: Scan and encode your first video library
---

This guide walks you through creating your first library, scanning for videos, and queuing encoding jobs.

## Prerequisites

- BitBonsai backend running with access to video files
- Docker volume mounts configured for video directories (see [Configuration](/installation/configuration))
- At least one worker node connected (main node or linked nodes)

## Navigate to Libraries

<Steps>
  <Step title="Open the Libraries page">
    Click **Libraries** in the left sidebar navigation.

    The Libraries page displays all configured [libraries](/glossary#library) and their [encoding](/glossary#encoding) statistics.

    <Frame>
      ![Libraries page with empty state](placeholder-libraries-empty.png)

      **What to capture:** The Libraries page showing the empty state with "Add Library" button in the top-right corner
    </Frame>
  </Step>

  <Step title="Click Add Library button">
    Click the **Add Library** button in the top-right corner of the page.

    A dialog will appear with [library](/glossary#library) configuration fields.

    <Frame>
      ![Add Library dialog](placeholder-add-library-dialog.png)

      **What to capture:** The "Add Library" modal dialog showing Name, Path, and Target Codec fields
    </Frame>
  </Step>
</Steps>

## Configure Library Settings

<Steps>
  <Step title="Enter library name">
    Provide a descriptive name for your library (e.g., "Movies", "TV Shows", "Documentaries").

    ```text
    Name: Movies
    ```
  </Step>

  <Step title="Specify library path">
    Enter the **absolute path** inside the [Docker container](/glossary#container) where your videos are mounted.

    ```text
    Path: /videos/movies
    ```

    <Warning>
      **Important:** The path must match your Docker [volume mount](/glossary#volume-mount).

      If you mounted `/mnt/media/movies` to `/videos/movies` in docker-compose.yml, use `/videos/movies` here (the container path, not your computer's path).
    </Warning>

    <Note>
      For Unraid setups, common paths are:
      - `/videos/movies` (mapped from `/mnt/user/media/movies`)
      - `/videos/tv` (mapped from `/mnt/user/media/tv`)

      **Not sure?** Check your docker-compose.yml or Unraid container settings for the "Container Path" you configured.
    </Note>
  </Step>

  <Step title="Select target codec">
    Choose the encoding codec for this library:

    | Codec | Compression | Speed | Quality | Use Case |
    |-------|-------------|-------|---------|----------|
    | **HEVC (H.265)** | High | Fast | Excellent | General purpose, wide device support |
    | **AV1** | Higher | Slower | Superior | Maximum compression, modern devices |

    <Note>
      HEVC is recommended for most users. AV1 provides better compression but encodes slower and requires newer hardware for playback.
    </Note>
  </Step>

  <Step title="Save the library">
    Click **Save** to create the library.

    The library appears in the Libraries list with 0 videos scanned.
  </Step>
</Steps>

## Scan for Videos

<Steps>
  <Step title="Start the scan">
    Click the **Scan** button (magnifying glass icon) next to your newly created library.

    BitBonsai will recursively search the [library](/glossary#library) path for video files.

    <Frame>
      ![Library with Scan button highlighted](placeholder-library-scan-button.png)

      **What to capture:** The Libraries page showing the newly created library with the "Scan" button (magnifying glass icon) highlighted
    </Frame>

    <Note>
      Scanning large libraries (1000+ files) may take 1-5 minutes. The UI updates automatically when complete.
    </Note>
  </Step>

  <Step title="Review detected videos">
    Once scanning completes, click the library name to view detected videos.

    <Frame>
      ![Library video list](placeholder-library-video-list.png)

      **What to capture:** The video list showing detected files with columns for Filename, Size, Codec, Duration, and Status
    </Frame>

    The video table displays:

    | Column | Description |
    |--------|-------------|
    | **Filename** | Video file name and relative path |
    | **Size** | File size in GB |
    | **[Codec](/glossary#codec)** | Current video [codec](/glossary#codec) (H.264, HEVC, etc.) |
    | **Duration** | Video length in HH:MM:SS |
    | **Status** | [Encoding](/glossary#encoding) status (NOT_QUEUED, QUEUED, ENCODING, COMPLETE) |

    <Warning>
      Videos **already encoded** in the target [codec](/glossary#codec) are marked SKIPPED and cannot be re-encoded.

      **Why?** Re-encoding a video that's already compressed causes quality loss. BitBonsai prevents this automatically.
    </Warning>
  </Step>
</Steps>

## Queue Videos for Encoding

<Steps>
  <Step title="Select videos to encode">
    Use checkboxes to select specific videos, or click **Select All** to choose all eligible videos.

    <Frame>
      ![Video selection with checkboxes](placeholder-select-videos.png)

      **What to capture:** The video table with several videos selected via checkboxes, showing the "Queue Selected" button enabled
    </Frame>

    <Note>
      Only videos with status `NOT_QUEUED` can be selected. Videos already in [queue](/glossary#queue) or encoded are disabled.
    </Note>
  </Step>

  <Step title="Queue selected videos">
    Click the **Queue Selected** button at the top of the video table.

    Selected videos change from `NOT_QUEUED` → `QUEUED` status.

    <Info>
    **What does "queuing" mean?**

    When you queue a video, you're adding it to the list of videos waiting to be encoded. BitBonsai will process them one by one (or in parallel if you have multiple [worker nodes](/glossary#child-node)).

    Think of it like a to-do list for encoding jobs.
    </Info>
  </Step>

  <Step title="Alternative: Queue all videos">
    To queue all eligible videos at once, click **Queue All** instead of selecting individually.

    This is useful for initial library setup when you want to encode everything.
  </Step>
</Steps>

## Monitor Encoding Progress

<Steps>
  <Step title="Navigate to Jobs page">
    Click **Jobs** in the left sidebar to view all encoding jobs.

    Jobs appear in the queue with status progression:

    ```
    QUEUED → ENCODING → COMPLETE
    ```
  </Step>

  <Step title="Track job progress">
    The Jobs page displays:

    - **Current progress** (percentage, frames processed)
    - **Encoding speed** (fps)
    - **Estimated time remaining** (ETA)
    - **Worker node** handling the job
    - **File size change** (original → encoded)

    <Note>
      For detailed job monitoring and troubleshooting, see [Understanding Jobs](/guides/understanding-jobs).
    </Note>
  </Step>
</Steps>

## What Happens Next?

Once videos are [queued](/glossary#queue), BitBonsai automatically:

1. **Distributes [jobs](/glossary#job)** to available [worker nodes](/glossary#child-node) based on load
2. **Encodes videos** using FFmpeg with optimized quality settings
3. **Validates output** to ensure no corruption or quality loss (see [Self-Healing](/glossary#self-healing))
4. **Replaces original** with encoded version (if configured)
5. **Moves to next job** in queue

<Info>
**You don't need to do anything else.** BitBonsai runs automatically in the background. Check the Jobs page to monitor progress.
</Info>

<Card title="Next Steps" icon="arrow-right" href="/guides/understanding-jobs">
  Learn how to monitor job progress, handle failures, and optimize encoding performance.
</Card>

## Common Issues

<AccordionGroup>
  <Accordion title="Library scan finds 0 videos" icon="magnifying-glass">
    **Possible causes:**
    - The path doesn't exist inside the [Docker container](/glossary#container)
    - [Volume mount](/glossary#volume-mount) misconfigured in docker-compose.yml
    - Files are not recognized video formats (MP4, MKV, AVI, MOV)

    **How to fix:**

    1. **Check if the path exists inside the container:**
       ```bash
       docker exec bitbonsai-backend ls /videos/movies
       ```
       If you see "No such file or directory," the path is wrong.

    2. **Check your docker-compose.yml [volume mount](/glossary#volume-mount):**
       Look for a line like:
       ```yaml
       - /mnt/media/movies:/videos
       ```
       The part after the `:` is the container path (use this in BitBonsai).

    3. **Make sure your files are videos:**
       BitBonsai only recognizes `.mp4`, `.mkv`, `.avi`, `.mov`, `.m4v`, `.ts` files.

    **Still stuck?** See [Get Help](/support/get-help) for support channels.
  </Accordion>

  <Accordion title="All videos marked SKIPPED" icon="forward">
    **Why this happens:**

    Your videos are already encoded in the target [codec](/glossary#codec). For example:
    - You set the library to encode to HEVC
    - But your videos are already HEVC (H.265)

    **This is intentional!** Re-encoding a video that's already compressed causes quality loss. BitBonsai prevents this automatically.

    **What to do:**

    If you want to encode these videos anyway (not recommended):
    1. Delete the library
    2. Create a new library with a different [codec](/glossary#codec) (e.g., AV1 instead of HEVC)

    **Recommendation:** Leave them as-is. They're already optimized.
  </Accordion>

  <Accordion title="Queue button is disabled (grayed out)" icon="ban">
    **Why this happens:**
    - No videos are selected
    - Selected videos are already [queued](/glossary#queue) or encoded
    - No [worker nodes](/glossary#child-node) are available

    **How to fix:**

    1. **Select videos with `NOT_QUEUED` status** (use checkboxes on the left)
    2. **Check if workers are running:**
       - Go to Settings → Nodes
       - Make sure at least one [node](/glossary#node) shows "Healthy" status
    3. **Restart backend if needed:**
       ```bash
       docker compose restart bitbonsai-backend
       ```

    **Still stuck?** See [Get Help](/support/get-help).
  </Accordion>

  <Accordion title="Jobs stuck in QUEUED status (not starting)" icon="hourglass">
    **Why this happens:**
    - No [worker nodes](/glossary#child-node) are connected
    - All workers are at max [concurrent job](/glossary#queue) capacity
    - Worker nodes are offline or unhealthy

    **How to fix:**

    1. **Check worker node status:**
       - Go to Settings → Nodes in the web interface
       - Look for nodes with "Unhealthy" or "Offline" status

    2. **Verify backend is running:**
       ```bash
       docker compose ps
       ```
       Both `bitbonsai-backend` and `bitbonsai-frontend` should show "Up".

    3. **Check backend logs for errors:**
       ```bash
       docker compose logs bitbonsai-backend
       ```
       Look for errors like "Cannot connect to database" or "Worker node timeout".

    4. **Restart the backend:**
       ```bash
       docker compose restart bitbonsai-backend
       ```

    **Still stuck?** See [Troubleshooting Guide](/advanced/troubleshooting) or [Get Help](/support/get-help).
  </Accordion>
</AccordionGroup>

## Tips for Large Libraries

<Note>
  **For libraries with 500+ videos:**

  - Queue videos in **batches** (e.g., 50-100 at a time) to monitor progress
  - Start with **smallest files** to verify settings before encoding large videos
  - Use **multiple linked nodes** to parallelize encoding across hardware
  - Enable **auto-replace** to automatically delete originals after successful encoding
</Note>

<Warning>
  **Always backup your original files** before enabling auto-replace. While BitBonsai validates encoded output, hardware failures or power loss during replacement can cause data loss.
</Warning>
